{-# LANGUAGE RecordWildCards #-}
{-# LANGUAGE TypeFamilies #-}

-- | Struct types for this framework.
--
-- Generated by objc-codegen. Do not edit.
module ObjC.CoreMIDI.Internal.Structs where

import Foreign.Ptr (Ptr, FunPtr)
import Foreign.Storable (Storable(..))
import Foreign.C.Types
import Foreign.LibFFI.Base (Arg, RetType, mkStorableArg, mkStorableRetType, newStructCType)
import Foreign.LibFFI.FFITypes
import Foreign.LibFFI.Internal (CType)
import System.IO.Unsafe (unsafePerformIO)
import ObjC.Runtime.Message (ObjCArgument(..), ObjCReturn(..), MsgSendVariant(..))
import ObjC.CoreMIDI.Internal.Enums

-- | MIDIControlTransform
--
-- Describes a transformation of MIDI control change events.
--
-- A single MIDIThruConnectionParams may describe any number of transformations to control	events. It is important that multiple transformations are ordered correctly: filter out,	remap, then alter values.
--
-- All transformations are done internally using 14-bit values, so for example, when doing	an add/min/max transform on a 7-bit control value, the parameter must be a 14-bit value.	For example, to add 10 to a control value, param must be (10 << 7) = 1280.
--
-- As per the MIDI specification, a number of controls are interpreted specially:
--
-- Control | Function	--------|---------	32-63   | the LSBs of 0-31	6/38    | data entry	96, 97  | data increment, decrement	98-101  | NRPN/RPN
--
-- controlType         The type of control specified by controlNumber      remappedControlType If transform is kMIDITransform_MapControl, the output control type      controlNumber       The control number to be affected.      transform           The type of transformation to be applied to the event values.      param               An argument to the transformation method (see description of MIDITransformType).
data MIDIControlTransform = MIDIControlTransform
  { midiControlTransformControlType :: !MIDITransformControlType
  , midiControlTransformRemappedControlType :: !MIDITransformControlType
  , midiControlTransformControlNumber :: !CUShort
  , midiControlTransformTransform :: !MIDITransformType
  , midiControlTransformParam :: !CShort
  } deriving (Eq, Show)

instance Storable MIDIControlTransform where
  sizeOf    _ = 8
  alignment _ = 2
  peek p = MIDIControlTransform <$> peekByteOff p 0
    <*> peekByteOff p 1
    <*> peekByteOff p 2
    <*> peekByteOff p 4
    <*> peekByteOff p 6
  poke p (MIDIControlTransform {..}) = do
    pokeByteOff p 0 midiControlTransformControlType
    pokeByteOff p 1 midiControlTransformRemappedControlType
    pokeByteOff p 2 midiControlTransformControlNumber
    pokeByteOff p 4 midiControlTransformTransform
    pokeByteOff p 6 midiControlTransformParam

{-# NOINLINE midiControlTransformStructType #-}
midiControlTransformStructType :: Ptr CType
midiControlTransformStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_uint8, ffi_type_uint8, ffi_type_uint16, ffi_type_uint16, ffi_type_sint16]

argMIDIControlTransform :: MIDIControlTransform -> Arg
argMIDIControlTransform = mkStorableArg midiControlTransformStructType

retMIDIControlTransform :: RetType MIDIControlTransform
retMIDIControlTransform = mkStorableRetType midiControlTransformStructType

instance ObjCArgument MIDIControlTransform where
  withObjCArg x k = k (argMIDIControlTransform x)

instance ObjCReturn MIDIControlTransform where
  type RawReturn MIDIControlTransform = MIDIControlTransform
  objcRetType = retMIDIControlTransform
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

-- | MIDIDriverInterface
--
-- The COM-style interface to a MIDI driver.
--
-- This is the function table interface to a MIDI driver.  Version 1 and 2 drivers use		this same table of function pointers (except as noted).
--
-- Drivers which support multiple version interfaces can tell which version		of the server is running by checking to see whether kMIDIDriverInterface2ID        or kMIDIDriverInterfaceID is passed to the factory function. If the version 1 interface is        requested, the driver should behave as if it is a version 1 driver.
data MIDIDriverInterface = MIDIDriverInterface
  { midiDriverInterface_reserved :: !(Ptr ())
  , midiDriverInterfaceQueryInterface :: !(Ptr ())
  , midiDriverInterfaceAddRef :: !(Ptr ())
  , midiDriverInterfaceRelease :: !(Ptr ())
  , midiDriverInterfaceFindDevices :: !(Ptr ())
  , midiDriverInterfaceStart :: !(Ptr ())
  , midiDriverInterfaceStop :: !(Ptr ())
  , midiDriverInterfaceConfigure :: !(Ptr ())
  , midiDriverInterfaceSend :: !(Ptr ())
  , midiDriverInterfaceEnableSource :: !(Ptr ())
  , midiDriverInterfaceFlush :: !(Ptr ())
  , midiDriverInterfaceMonitor :: !(Ptr ())
  , midiDriverInterfaceSendPackets :: !(Ptr ())
  , midiDriverInterfaceMonitorEvents :: !(Ptr ())
  } deriving (Eq, Show)

instance Storable MIDIDriverInterface where
  sizeOf    _ = 112
  alignment _ = 8
  peek p = MIDIDriverInterface <$> peekByteOff p 0
    <*> peekByteOff p 8
    <*> peekByteOff p 16
    <*> peekByteOff p 24
    <*> peekByteOff p 32
    <*> peekByteOff p 40
    <*> peekByteOff p 48
    <*> peekByteOff p 56
    <*> peekByteOff p 64
    <*> peekByteOff p 72
    <*> peekByteOff p 80
    <*> peekByteOff p 88
    <*> peekByteOff p 96
    <*> peekByteOff p 104
  poke p (MIDIDriverInterface {..}) = do
    pokeByteOff p 0 midiDriverInterface_reserved
    pokeByteOff p 8 midiDriverInterfaceQueryInterface
    pokeByteOff p 16 midiDriverInterfaceAddRef
    pokeByteOff p 24 midiDriverInterfaceRelease
    pokeByteOff p 32 midiDriverInterfaceFindDevices
    pokeByteOff p 40 midiDriverInterfaceStart
    pokeByteOff p 48 midiDriverInterfaceStop
    pokeByteOff p 56 midiDriverInterfaceConfigure
    pokeByteOff p 64 midiDriverInterfaceSend
    pokeByteOff p 72 midiDriverInterfaceEnableSource
    pokeByteOff p 80 midiDriverInterfaceFlush
    pokeByteOff p 88 midiDriverInterfaceMonitor
    pokeByteOff p 96 midiDriverInterfaceSendPackets
    pokeByteOff p 104 midiDriverInterfaceMonitorEvents

{-# NOINLINE midiDriverInterfaceStructType #-}
midiDriverInterfaceStructType :: Ptr CType
midiDriverInterfaceStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer, ffi_type_pointer]

argMIDIDriverInterface :: MIDIDriverInterface -> Arg
argMIDIDriverInterface = mkStorableArg midiDriverInterfaceStructType

retMIDIDriverInterface :: RetType MIDIDriverInterface
retMIDIDriverInterface = mkStorableRetType midiDriverInterfaceStructType

instance ObjCArgument MIDIDriverInterface where
  withObjCArg x k = k (argMIDIDriverInterface x)

instance ObjCReturn MIDIDriverInterface where
  type RawReturn MIDIDriverInterface = MIDIDriverInterface
  objcRetType = retMIDIDriverInterface
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

data MIDIIOErrorNotification = MIDIIOErrorNotification
  { midiioErrorNotificationMessageID :: !MIDINotificationMessageID
  , midiioErrorNotificationMessageSize :: !CUInt
  , midiioErrorNotificationDriverDevice :: !CUInt
  , midiioErrorNotificationErrorCode :: !CInt
  } deriving (Eq, Show)

instance Storable MIDIIOErrorNotification where
  sizeOf    _ = 16
  alignment _ = 4
  peek p = MIDIIOErrorNotification <$> peekByteOff p 0
    <*> peekByteOff p 4
    <*> peekByteOff p 8
    <*> peekByteOff p 12
  poke p (MIDIIOErrorNotification {..}) = do
    pokeByteOff p 0 midiioErrorNotificationMessageID
    pokeByteOff p 4 midiioErrorNotificationMessageSize
    pokeByteOff p 8 midiioErrorNotificationDriverDevice
    pokeByteOff p 12 midiioErrorNotificationErrorCode

{-# NOINLINE midiioErrorNotificationStructType #-}
midiioErrorNotificationStructType :: Ptr CType
midiioErrorNotificationStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_sint, ffi_type_uint, ffi_type_uint, ffi_type_sint]

argMIDIIOErrorNotification :: MIDIIOErrorNotification -> Arg
argMIDIIOErrorNotification = mkStorableArg midiioErrorNotificationStructType

retMIDIIOErrorNotification :: RetType MIDIIOErrorNotification
retMIDIIOErrorNotification = mkStorableRetType midiioErrorNotificationStructType

instance ObjCArgument MIDIIOErrorNotification where
  withObjCArg x k = k (argMIDIIOErrorNotification x)

instance ObjCReturn MIDIIOErrorNotification where
  type RawReturn MIDIIOErrorNotification = MIDIIOErrorNotification
  objcRetType = retMIDIIOErrorNotification
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

data MIDIMessage_128 = MIDIMessage_128
  { midiMessage_128Word0 :: !CUInt
  , midiMessage_128Word1 :: !CUInt
  , midiMessage_128Word2 :: !CUInt
  , midiMessage_128Word3 :: !CUInt
  } deriving (Eq, Show)

instance Storable MIDIMessage_128 where
  sizeOf    _ = 16
  alignment _ = 4
  peek p = MIDIMessage_128 <$> peekByteOff p 0
    <*> peekByteOff p 4
    <*> peekByteOff p 8
    <*> peekByteOff p 12
  poke p (MIDIMessage_128 {..}) = do
    pokeByteOff p 0 midiMessage_128Word0
    pokeByteOff p 4 midiMessage_128Word1
    pokeByteOff p 8 midiMessage_128Word2
    pokeByteOff p 12 midiMessage_128Word3

{-# NOINLINE midiMessage_128StructType #-}
midiMessage_128StructType :: Ptr CType
midiMessage_128StructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_uint, ffi_type_uint, ffi_type_uint, ffi_type_uint]

argMIDIMessage_128 :: MIDIMessage_128 -> Arg
argMIDIMessage_128 = mkStorableArg midiMessage_128StructType

retMIDIMessage_128 :: RetType MIDIMessage_128
retMIDIMessage_128 = mkStorableRetType midiMessage_128StructType

instance ObjCArgument MIDIMessage_128 where
  withObjCArg x k = k (argMIDIMessage_128 x)

instance ObjCReturn MIDIMessage_128 where
  type RawReturn MIDIMessage_128 = MIDIMessage_128
  objcRetType = retMIDIMessage_128
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

data MIDIMessage_64 = MIDIMessage_64
  { midiMessage_64Word0 :: !CUInt
  , midiMessage_64Word1 :: !CUInt
  } deriving (Eq, Show)

instance Storable MIDIMessage_64 where
  sizeOf    _ = 8
  alignment _ = 4
  peek p = MIDIMessage_64 <$> peekByteOff p 0
    <*> peekByteOff p 4
  poke p (MIDIMessage_64 {..}) = do
    pokeByteOff p 0 midiMessage_64Word0
    pokeByteOff p 4 midiMessage_64Word1

{-# NOINLINE midiMessage_64StructType #-}
midiMessage_64StructType :: Ptr CType
midiMessage_64StructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_uint, ffi_type_uint]

argMIDIMessage_64 :: MIDIMessage_64 -> Arg
argMIDIMessage_64 = mkStorableArg midiMessage_64StructType

retMIDIMessage_64 :: RetType MIDIMessage_64
retMIDIMessage_64 = mkStorableRetType midiMessage_64StructType

instance ObjCArgument MIDIMessage_64 where
  withObjCArg x k = k (argMIDIMessage_64 x)

instance ObjCReturn MIDIMessage_64 where
  type RawReturn MIDIMessage_64 = MIDIMessage_64
  objcRetType = retMIDIMessage_64
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

data MIDIMessage_96 = MIDIMessage_96
  { midiMessage_96Word0 :: !CUInt
  , midiMessage_96Word1 :: !CUInt
  , midiMessage_96Word2 :: !CUInt
  } deriving (Eq, Show)

instance Storable MIDIMessage_96 where
  sizeOf    _ = 12
  alignment _ = 4
  peek p = MIDIMessage_96 <$> peekByteOff p 0
    <*> peekByteOff p 4
    <*> peekByteOff p 8
  poke p (MIDIMessage_96 {..}) = do
    pokeByteOff p 0 midiMessage_96Word0
    pokeByteOff p 4 midiMessage_96Word1
    pokeByteOff p 8 midiMessage_96Word2

{-# NOINLINE midiMessage_96StructType #-}
midiMessage_96StructType :: Ptr CType
midiMessage_96StructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_uint, ffi_type_uint, ffi_type_uint]

argMIDIMessage_96 :: MIDIMessage_96 -> Arg
argMIDIMessage_96 = mkStorableArg midiMessage_96StructType

retMIDIMessage_96 :: RetType MIDIMessage_96
retMIDIMessage_96 = mkStorableRetType midiMessage_96StructType

instance ObjCArgument MIDIMessage_96 where
  withObjCArg x k = k (argMIDIMessage_96 x)

instance ObjCReturn MIDIMessage_96 where
  type RawReturn MIDIMessage_96 = MIDIMessage_96
  objcRetType = retMIDIMessage_96
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

-- | MIDINotification
--
-- A message describing a system state change.
--
-- A MIDINotification is a structure passed to a MIDINotifyProc or MIDINotifyBlock, when		CoreMIDI wishes to inform a client of a change in the state of the system.
--
-- messageID						type of message				messageSize						size of the entire message, including messageID and						messageSize
data MIDINotification = MIDINotification
  { midiNotificationMessageID :: !MIDINotificationMessageID
  , midiNotificationMessageSize :: !CUInt
  } deriving (Eq, Show)

instance Storable MIDINotification where
  sizeOf    _ = 8
  alignment _ = 4
  peek p = MIDINotification <$> peekByteOff p 0
    <*> peekByteOff p 4
  poke p (MIDINotification {..}) = do
    pokeByteOff p 0 midiNotificationMessageID
    pokeByteOff p 4 midiNotificationMessageSize

{-# NOINLINE midiNotificationStructType #-}
midiNotificationStructType :: Ptr CType
midiNotificationStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_sint, ffi_type_uint]

argMIDINotification :: MIDINotification -> Arg
argMIDINotification = mkStorableArg midiNotificationStructType

retMIDINotification :: RetType MIDINotification
retMIDINotification = mkStorableRetType midiNotificationStructType

instance ObjCArgument MIDINotification where
  withObjCArg x k = k (argMIDINotification x)

instance ObjCReturn MIDINotification where
  type RawReturn MIDINotification = MIDINotification
  objcRetType = retMIDINotification
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

-- | MIDIObjectAddRemoveNotification
--
-- A message describing the addition or removal of an object.
--
-- messageID						type of message				messageSize						size of the entire message, including messageID and messageSize				parent						the parent of the added or removed object (possibly NULL)				parentType						the type of the parent object (undefined if parent is NULL)				child						the added or removed object				childType						the type of the added or removed object
data MIDIObjectAddRemoveNotification = MIDIObjectAddRemoveNotification
  { midiObjectAddRemoveNotificationMessageID :: !MIDINotificationMessageID
  , midiObjectAddRemoveNotificationMessageSize :: !CUInt
  , midiObjectAddRemoveNotificationParent :: !CUInt
  , midiObjectAddRemoveNotificationParentType :: !MIDIObjectType
  , midiObjectAddRemoveNotificationChild :: !CUInt
  , midiObjectAddRemoveNotificationChildType :: !MIDIObjectType
  } deriving (Eq, Show)

instance Storable MIDIObjectAddRemoveNotification where
  sizeOf    _ = 24
  alignment _ = 4
  peek p = MIDIObjectAddRemoveNotification <$> peekByteOff p 0
    <*> peekByteOff p 4
    <*> peekByteOff p 8
    <*> peekByteOff p 12
    <*> peekByteOff p 16
    <*> peekByteOff p 20
  poke p (MIDIObjectAddRemoveNotification {..}) = do
    pokeByteOff p 0 midiObjectAddRemoveNotificationMessageID
    pokeByteOff p 4 midiObjectAddRemoveNotificationMessageSize
    pokeByteOff p 8 midiObjectAddRemoveNotificationParent
    pokeByteOff p 12 midiObjectAddRemoveNotificationParentType
    pokeByteOff p 16 midiObjectAddRemoveNotificationChild
    pokeByteOff p 20 midiObjectAddRemoveNotificationChildType

{-# NOINLINE midiObjectAddRemoveNotificationStructType #-}
midiObjectAddRemoveNotificationStructType :: Ptr CType
midiObjectAddRemoveNotificationStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_sint, ffi_type_uint, ffi_type_uint, ffi_type_sint, ffi_type_uint, ffi_type_sint]

argMIDIObjectAddRemoveNotification :: MIDIObjectAddRemoveNotification -> Arg
argMIDIObjectAddRemoveNotification = mkStorableArg midiObjectAddRemoveNotificationStructType

retMIDIObjectAddRemoveNotification :: RetType MIDIObjectAddRemoveNotification
retMIDIObjectAddRemoveNotification = mkStorableRetType midiObjectAddRemoveNotificationStructType

instance ObjCArgument MIDIObjectAddRemoveNotification where
  withObjCArg x k = k (argMIDIObjectAddRemoveNotification x)

instance ObjCReturn MIDIObjectAddRemoveNotification where
  type RawReturn MIDIObjectAddRemoveNotification = MIDIObjectAddRemoveNotification
  objcRetType = retMIDIObjectAddRemoveNotification
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

-- | MIDIObjectPropertyChangeNotification
--
-- A message describing the addition or removal of an object.
--
-- messageID						type of message				messageSize						size of the entire message, including messageID and messageSize				object						the object whose property has changed				objectType						the type of the object whose property has changed				propertyName						the name of the changed property
data MIDIObjectPropertyChangeNotification = MIDIObjectPropertyChangeNotification
  { midiObjectPropertyChangeNotificationMessageID :: !MIDINotificationMessageID
  , midiObjectPropertyChangeNotificationMessageSize :: !CUInt
  , midiObjectPropertyChangeNotificationObject :: !CUInt
  , midiObjectPropertyChangeNotificationObjectType :: !MIDIObjectType
  , midiObjectPropertyChangeNotificationPropertyName :: !(Ptr ())
  } deriving (Eq, Show)

instance Storable MIDIObjectPropertyChangeNotification where
  sizeOf    _ = 24
  alignment _ = 8
  peek p = MIDIObjectPropertyChangeNotification <$> peekByteOff p 0
    <*> peekByteOff p 4
    <*> peekByteOff p 8
    <*> peekByteOff p 12
    <*> peekByteOff p 16
  poke p (MIDIObjectPropertyChangeNotification {..}) = do
    pokeByteOff p 0 midiObjectPropertyChangeNotificationMessageID
    pokeByteOff p 4 midiObjectPropertyChangeNotificationMessageSize
    pokeByteOff p 8 midiObjectPropertyChangeNotificationObject
    pokeByteOff p 12 midiObjectPropertyChangeNotificationObjectType
    pokeByteOff p 16 midiObjectPropertyChangeNotificationPropertyName

{-# NOINLINE midiObjectPropertyChangeNotificationStructType #-}
midiObjectPropertyChangeNotificationStructType :: Ptr CType
midiObjectPropertyChangeNotificationStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_sint, ffi_type_uint, ffi_type_uint, ffi_type_sint, ffi_type_pointer]

argMIDIObjectPropertyChangeNotification :: MIDIObjectPropertyChangeNotification -> Arg
argMIDIObjectPropertyChangeNotification = mkStorableArg midiObjectPropertyChangeNotificationStructType

retMIDIObjectPropertyChangeNotification :: RetType MIDIObjectPropertyChangeNotification
retMIDIObjectPropertyChangeNotification = mkStorableRetType midiObjectPropertyChangeNotificationStructType

instance ObjCArgument MIDIObjectPropertyChangeNotification where
  withObjCArg x k = k (argMIDIObjectPropertyChangeNotification x)

instance ObjCReturn MIDIObjectPropertyChangeNotification where
  type RawReturn MIDIObjectPropertyChangeNotification = MIDIObjectPropertyChangeNotification
  objcRetType = retMIDIObjectPropertyChangeNotification
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

-- | MIDIThruConnectionEndpoint
--
-- Describes a source or destination in a MIDIThruConnection.
--
-- When creating one of these, you can leave uniqueID 0 if the endpoint exists and you are passing	its MIDIEndpointRef.
--
-- When obtaining one of these from CoreMIDI, endpointRef may be NULL if it doesn't exist, but the	uniqueID will always be non-zero.
--
-- endpointRef     The endpoint specified as a MIDIEndpointRef.      uniqueID        The endpoint specified by its uniqueID.
data MIDIThruConnectionEndpoint = MIDIThruConnectionEndpoint
  { midiThruConnectionEndpointEndpointRef :: !CUInt
  , midiThruConnectionEndpointUniqueID :: !CInt
  } deriving (Eq, Show)

instance Storable MIDIThruConnectionEndpoint where
  sizeOf    _ = 8
  alignment _ = 4
  peek p = MIDIThruConnectionEndpoint <$> peekByteOff p 0
    <*> peekByteOff p 4
  poke p (MIDIThruConnectionEndpoint {..}) = do
    pokeByteOff p 0 midiThruConnectionEndpointEndpointRef
    pokeByteOff p 4 midiThruConnectionEndpointUniqueID

{-# NOINLINE midiThruConnectionEndpointStructType #-}
midiThruConnectionEndpointStructType :: Ptr CType
midiThruConnectionEndpointStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_uint, ffi_type_sint]

argMIDIThruConnectionEndpoint :: MIDIThruConnectionEndpoint -> Arg
argMIDIThruConnectionEndpoint = mkStorableArg midiThruConnectionEndpointStructType

retMIDIThruConnectionEndpoint :: RetType MIDIThruConnectionEndpoint
retMIDIThruConnectionEndpoint = mkStorableRetType midiThruConnectionEndpointStructType

instance ObjCArgument MIDIThruConnectionEndpoint where
  withObjCArg x k = k (argMIDIThruConnectionEndpoint x)

instance ObjCReturn MIDIThruConnectionEndpoint where
  type RawReturn MIDIThruConnectionEndpoint = MIDIThruConnectionEndpoint
  objcRetType = retMIDIThruConnectionEndpoint
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

-- | MIDITransform
--
-- Describes how a single type of MIDI event is transformed.
--
-- This structure controls the transformation of various MIDI events other than control changes.
--
-- transform   The type of transformation to be applied to the event values.          param       An argument to the transformation method (see description of MIDITransformType).
data MIDITransform = MIDITransform
  { midiTransformTransform :: !MIDITransformType
  , midiTransformParam :: !CShort
  } deriving (Eq, Show)

instance Storable MIDITransform where
  sizeOf    _ = 4
  alignment _ = 2
  peek p = MIDITransform <$> peekByteOff p 0
    <*> peekByteOff p 2
  poke p (MIDITransform {..}) = do
    pokeByteOff p 0 midiTransformTransform
    pokeByteOff p 2 midiTransformParam

{-# NOINLINE midiTransformStructType #-}
midiTransformStructType :: Ptr CType
midiTransformStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_uint16, ffi_type_sint16]

argMIDITransform :: MIDITransform -> Arg
argMIDITransform = mkStorableArg midiTransformStructType

retMIDITransform :: RetType MIDITransform
retMIDITransform = mkStorableRetType midiTransformStructType

instance ObjCArgument MIDITransform where
  withObjCArg x k = k (argMIDITransform x)

instance ObjCReturn MIDITransform where
  type RawReturn MIDITransform = MIDITransform
  objcRetType = retMIDITransform
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure
