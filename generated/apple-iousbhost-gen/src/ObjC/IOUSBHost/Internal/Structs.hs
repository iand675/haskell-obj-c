{-# LANGUAGE RecordWildCards #-}
{-# LANGUAGE TypeFamilies #-}

-- | Struct types for this framework.
--
-- Generated by objc-codegen. Do not edit.
module ObjC.IOUSBHost.Internal.Structs where

import Foreign.Ptr (Ptr, FunPtr)
import Foreign.Storable (Storable(..))
import Foreign.C.Types
import Foreign.LibFFI.Base (Arg, RetType, mkStorableArg, mkStorableRetType, newStructCType)
import Foreign.LibFFI.FFITypes
import Foreign.LibFFI.Internal (CType)
import System.IO.Unsafe (unsafePerformIO)
import ObjC.Runtime.Message (ObjCArgument(..), ObjCReturn(..), MsgSendVariant(..))
import ObjC.IOKit.Internal.Structs
import ObjC.IOUSBHost.Internal.Enums

-- | IOUSBHostCIMessage
--
-- Foundational IOUSBHostControllerInterface message structure used for commands, transfers, and interrupts
--
-- IOUSBHostCIMessage structures are control structures passed between the IOUSBHostControllerInterface client and the kernel driver.  They are used to represent capabilities during initialization, commands and transfers sent from the kernel, and interrupt events sent to the kernel.
data IOUSBHostCIMessage = IOUSBHostCIMessage
  { iousbHostCIMessageControl :: !CUInt
  , iousbHostCIMessageData0 :: !CUInt
  , iousbHostCIMessageData1 :: !CULong
  } deriving (Eq, Show)

instance Storable IOUSBHostCIMessage where
  sizeOf    _ = 16
  alignment _ = 8
  peek p = IOUSBHostCIMessage <$> peekByteOff p 0
    <*> peekByteOff p 4
    <*> peekByteOff p 8
  poke p (IOUSBHostCIMessage {..}) = do
    pokeByteOff p 0 iousbHostCIMessageControl
    pokeByteOff p 4 iousbHostCIMessageData0
    pokeByteOff p 8 iousbHostCIMessageData1

{-# NOINLINE iousbHostCIMessageStructType #-}
iousbHostCIMessageStructType :: Ptr CType
iousbHostCIMessageStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_uint, ffi_type_uint, ffi_type_ulong]

argIOUSBHostCIMessage :: IOUSBHostCIMessage -> Arg
argIOUSBHostCIMessage = mkStorableArg iousbHostCIMessageStructType

retIOUSBHostCIMessage :: RetType IOUSBHostCIMessage
retIOUSBHostCIMessage = mkStorableRetType iousbHostCIMessageStructType

instance ObjCArgument IOUSBHostCIMessage where
  withObjCArg x k = k (argIOUSBHostCIMessage x)

instance ObjCReturn IOUSBHostCIMessage where
  type RawReturn IOUSBHostCIMessage = IOUSBHostCIMessage
  objcRetType = retIOUSBHostCIMessage
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

-- | IOUSBHostIsochronousFrame
--
-- Structure representing a single frame in an isochronous transfer. Use of this              structure is discouraged, use
--
-- IOUSBHostIsochronousTransaction
--
-- instead.        status Completion status for this individual frame. IOUSBHostFamily will initialize              this to kIOReturnInvalid and will update the field with a valid status code upon              completion of the frame.        requestCount The number of bytes requested to transfer for this frame.              This field must be initialized by the caller before the structure is submitted.        completeCount The number of bytes actually transferred for this frame.              IOUSBHostFamily will update this field upon completion of the frame.        reserved Reserved for future use.        timeStamp The observed IOUSBHostTime for this frame's completion.  Note that              interrupt latency and system load may result in more than one frame completing with              the same timestamp.
data IOUSBHostIsochronousFrame = IOUSBHostIsochronousFrame
  { iousbHostIsochronousFrameStatus :: !CInt
  , iousbHostIsochronousFrameRequestCount :: !CUInt
  , iousbHostIsochronousFrameCompleteCount :: !CUInt
  , iousbHostIsochronousFrameReserved :: !CUInt
  , iousbHostIsochronousFrameTimeStamp :: !CULong
  } deriving (Eq, Show)

instance Storable IOUSBHostIsochronousFrame where
  sizeOf    _ = 24
  alignment _ = 8
  peek p = IOUSBHostIsochronousFrame <$> peekByteOff p 0
    <*> peekByteOff p 4
    <*> peekByteOff p 8
    <*> peekByteOff p 12
    <*> peekByteOff p 16
  poke p (IOUSBHostIsochronousFrame {..}) = do
    pokeByteOff p 0 iousbHostIsochronousFrameStatus
    pokeByteOff p 4 iousbHostIsochronousFrameRequestCount
    pokeByteOff p 8 iousbHostIsochronousFrameCompleteCount
    pokeByteOff p 12 iousbHostIsochronousFrameReserved
    pokeByteOff p 16 iousbHostIsochronousFrameTimeStamp

{-# NOINLINE iousbHostIsochronousFrameStructType #-}
iousbHostIsochronousFrameStructType :: Ptr CType
iousbHostIsochronousFrameStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_sint, ffi_type_uint, ffi_type_uint, ffi_type_uint, ffi_type_ulong]

argIOUSBHostIsochronousFrame :: IOUSBHostIsochronousFrame -> Arg
argIOUSBHostIsochronousFrame = mkStorableArg iousbHostIsochronousFrameStructType

retIOUSBHostIsochronousFrame :: RetType IOUSBHostIsochronousFrame
retIOUSBHostIsochronousFrame = mkStorableRetType iousbHostIsochronousFrameStructType

instance ObjCArgument IOUSBHostIsochronousFrame where
  withObjCArg x k = k (argIOUSBHostIsochronousFrame x)

instance ObjCReturn IOUSBHostIsochronousFrame where
  type RawReturn IOUSBHostIsochronousFrame = IOUSBHostIsochronousFrame
  objcRetType = retIOUSBHostIsochronousFrame
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

-- | IOUSBHostIsochronousTransaction
--
-- Structure representing a single frame or microframe in an isochronous transfer.        status Completion status for this individual transaction. IOUSBHostFamily will              initialize this to kIOReturnInvalid and will update the field with a valid status              code upon completion of the transaction.        requestCount The number of bytes requested to transfer for this transaction.              This field must be initialized by the caller before the structure is submitted.        offset The number of bytes between the start of the memory descriptor in which this              transaction resides and the start of the transaction.  The offset cannot exceed 4GB.        completeCount The number of bytes actually transferred for this transaction.              IOUSBHostFamily will update this field upon completion of the transaction.        timeStamp The observed IOUSBHostTime for this transaction's completion.  Note that              interrupt latency and system load may result in more than one transaction completing              with the same timestamp.        options Flags that specify additional transaction behavior.  See
--
-- IOUSBHostIsochronousTransactionOptions
--
-- for more details.
data IOUSBHostIsochronousTransaction = IOUSBHostIsochronousTransaction
  { iousbHostIsochronousTransactionStatus :: !CInt
  , iousbHostIsochronousTransactionRequestCount :: !CUInt
  , iousbHostIsochronousTransactionOffset :: !CUInt
  , iousbHostIsochronousTransactionCompleteCount :: !CUInt
  , iousbHostIsochronousTransactionTimeStamp :: !CULong
  , iousbHostIsochronousTransactionOptions :: !IOUSBHostIsochronousTransactionOptions
  } deriving (Eq, Show)

instance Storable IOUSBHostIsochronousTransaction where
  sizeOf    _ = 32
  alignment _ = 8
  peek p = IOUSBHostIsochronousTransaction <$> peekByteOff p 0
    <*> peekByteOff p 4
    <*> peekByteOff p 8
    <*> peekByteOff p 12
    <*> peekByteOff p 16
    <*> peekByteOff p 24
  poke p (IOUSBHostIsochronousTransaction {..}) = do
    pokeByteOff p 0 iousbHostIsochronousTransactionStatus
    pokeByteOff p 4 iousbHostIsochronousTransactionRequestCount
    pokeByteOff p 8 iousbHostIsochronousTransactionOffset
    pokeByteOff p 12 iousbHostIsochronousTransactionCompleteCount
    pokeByteOff p 16 iousbHostIsochronousTransactionTimeStamp
    pokeByteOff p 24 iousbHostIsochronousTransactionOptions

{-# NOINLINE iousbHostIsochronousTransactionStructType #-}
iousbHostIsochronousTransactionStructType :: Ptr CType
iousbHostIsochronousTransactionStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_sint, ffi_type_uint, ffi_type_uint, ffi_type_uint, ffi_type_ulong, ffi_type_uint]

argIOUSBHostIsochronousTransaction :: IOUSBHostIsochronousTransaction -> Arg
argIOUSBHostIsochronousTransaction = mkStorableArg iousbHostIsochronousTransactionStructType

retIOUSBHostIsochronousTransaction :: RetType IOUSBHostIsochronousTransaction
retIOUSBHostIsochronousTransaction = mkStorableRetType iousbHostIsochronousTransactionStructType

instance ObjCArgument IOUSBHostIsochronousTransaction where
  withObjCArg x k = k (argIOUSBHostIsochronousTransaction x)

instance ObjCReturn IOUSBHostIsochronousTransaction where
  type RawReturn IOUSBHostIsochronousTransaction = IOUSBHostIsochronousTransaction
  objcRetType = retIOUSBHostIsochronousTransaction
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure

-- | IOUSBHostIOSourceDescriptors
--
-- Encapsulates descriptors for a single endpoint
--
-- The IOUSBHostIOSourceDescriptors struct is used to initialize and adjust              pipes in the system. The bcdUSB member must be initialized to the USB revision              supported by the device. Acceptable values are 0x0110, 0x0200, 0x0300, 0x0310. The              descriptor member must always be initialized with a valid endpoint descriptor. The              ssCompanionDescriptor and sspCompanionDescriptor members may be              required for bcdUSB versions 0x0300 and greater, depending on device operating              speed and values set in the descriptors.  See USB 3.1 ยง 9.5 for more information on              when these descriptors may be required.
data IOUSBHostIOSourceDescriptors = IOUSBHostIOSourceDescriptors
  { iousbHostIOSourceDescriptorsBcdUSB :: !CUShort
  , iousbHostIOSourceDescriptorsDescriptor :: !IOUSBEndpointDescriptor
  , iousbHostIOSourceDescriptorsSsCompanionDescriptor :: !IOUSBSuperSpeedEndpointCompanionDescriptor
  , iousbHostIOSourceDescriptorsSspCompanionDescriptor :: !IOUSBSuperSpeedPlusIsochronousEndpointCompanionDescriptor
  } deriving (Eq, Show)

instance Storable IOUSBHostIOSourceDescriptors where
  sizeOf    _ = 24
  alignment _ = 4
  peek p = IOUSBHostIOSourceDescriptors <$> peekByteOff p 0
    <*> peekByteOff p 2
    <*> peekByteOff p 10
    <*> peekByteOff p 16
  poke p (IOUSBHostIOSourceDescriptors {..}) = do
    pokeByteOff p 0 iousbHostIOSourceDescriptorsBcdUSB
    pokeByteOff p 2 iousbHostIOSourceDescriptorsDescriptor
    pokeByteOff p 10 iousbHostIOSourceDescriptorsSsCompanionDescriptor
    pokeByteOff p 16 iousbHostIOSourceDescriptorsSspCompanionDescriptor

{-# NOINLINE iousbHostIOSourceDescriptorsStructType #-}
iousbHostIOSourceDescriptorsStructType :: Ptr CType
iousbHostIOSourceDescriptorsStructType = unsafePerformIO $ fst <$> newStructCType [ffi_type_uint16, iousbEndpointDescriptorStructType, iousbSuperSpeedEndpointCompanionDescriptorStructType, iousbSuperSpeedPlusIsochronousEndpointCompanionDescriptorStructType]

argIOUSBHostIOSourceDescriptors :: IOUSBHostIOSourceDescriptors -> Arg
argIOUSBHostIOSourceDescriptors = mkStorableArg iousbHostIOSourceDescriptorsStructType

retIOUSBHostIOSourceDescriptors :: RetType IOUSBHostIOSourceDescriptors
retIOUSBHostIOSourceDescriptors = mkStorableRetType iousbHostIOSourceDescriptorsStructType

instance ObjCArgument IOUSBHostIOSourceDescriptors where
  withObjCArg x k = k (argIOUSBHostIOSourceDescriptors x)

instance ObjCReturn IOUSBHostIOSourceDescriptors where
  type RawReturn IOUSBHostIOSourceDescriptors = IOUSBHostIOSourceDescriptors
  objcRetType = retIOUSBHostIOSourceDescriptors
  msgSendVariant = MsgSendStret
  fromRetained = pure
  fromOwned = pure
