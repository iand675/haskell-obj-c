{-# LANGUAGE PatternSynonyms #-}
{-# LANGUAGE TypeApplications #-}
{-# LANGUAGE ScopedTypeVariables #-}
{-# LANGUAGE FlexibleContexts #-}

-- | A notification generated by a ``CKQuerySubscription``
--
-- @notificationType@ == @.query@ When properties must be dropped (see @isPruned),@ here's the order of importance.  The most important properties are first, they'll be the last ones to be dropped. - notificationID - badge - alertLocalizationKey - alertLocalizationArgs - alertBody - alertActionLocalizationKey - alertLaunchImage - soundName - content-available - desiredKeys - queryNotificationReason - recordID - containerIdentifier - subscriptionOwnerUserRecordID - titleLocalizationKey - titleLocalizationArgs - title - subtitleLocalizationKey - subtitleLocalizationArgs - subtitle
--
-- Generated bindings for @CKQueryNotification@.
module ObjC.CloudKit.CKQueryNotification
  ( CKQueryNotification
  , IsCKQueryNotification(..)
  , queryNotificationReason
  , recordFields
  , recordID
  , databaseScope
  , queryNotificationReasonSelector
  , recordFieldsSelector
  , recordIDSelector
  , databaseScopeSelector

  -- * Enum types
  , CKDatabaseScope(CKDatabaseScope)
  , pattern CKDatabaseScopePublic
  , pattern CKDatabaseScopePrivate
  , pattern CKDatabaseScopeShared
  , CKQueryNotificationReason(CKQueryNotificationReason)
  , pattern CKQueryNotificationReasonRecordCreated
  , pattern CKQueryNotificationReasonRecordUpdated
  , pattern CKQueryNotificationReasonRecordDeleted

  ) where

import Foreign.Ptr (Ptr, nullPtr, castPtr)
import Foreign.LibFFI
import Foreign.C.Types
import Data.Int (Int8, Int16)
import Data.Word (Word16)
import Data.Coerce (coerce)

import ObjC.Runtime.Types
import ObjC.Runtime.MsgSend (sendMsg, sendClassMsg)
import ObjC.Runtime.Selector (mkSelector)
import ObjC.Runtime.Class (getRequiredClass)

import ObjC.CloudKit.Internal.Classes
import ObjC.CloudKit.Internal.Enums
import ObjC.Foundation.Internal.Classes

-- | @- queryNotificationReason@
queryNotificationReason :: IsCKQueryNotification ckQueryNotification => ckQueryNotification -> IO CKQueryNotificationReason
queryNotificationReason ckQueryNotification  =
  fmap (coerce :: CLong -> CKQueryNotificationReason) $ sendMsg ckQueryNotification (mkSelector "queryNotificationReason") retCLong []

-- | A set of key->value pairs for creates and updates.
--
-- You request the server fill out this property via the @desiredKeys@ property of @CKSubscription.NotificationInfo@
--
-- ObjC selector: @- recordFields@
recordFields :: IsCKQueryNotification ckQueryNotification => ckQueryNotification -> IO (Id NSDictionary)
recordFields ckQueryNotification  =
  sendMsg ckQueryNotification (mkSelector "recordFields") (retPtr retVoid) [] >>= retainedObject . castPtr

-- | @- recordID@
recordID :: IsCKQueryNotification ckQueryNotification => ckQueryNotification -> IO (Id CKRecordID)
recordID ckQueryNotification  =
  sendMsg ckQueryNotification (mkSelector "recordID") (retPtr retVoid) [] >>= retainedObject . castPtr

-- | @- databaseScope@
databaseScope :: IsCKQueryNotification ckQueryNotification => ckQueryNotification -> IO CKDatabaseScope
databaseScope ckQueryNotification  =
  fmap (coerce :: CLong -> CKDatabaseScope) $ sendMsg ckQueryNotification (mkSelector "databaseScope") retCLong []

-- ---------------------------------------------------------------------------
-- Selectors
-- ---------------------------------------------------------------------------

-- | @Selector@ for @queryNotificationReason@
queryNotificationReasonSelector :: Selector
queryNotificationReasonSelector = mkSelector "queryNotificationReason"

-- | @Selector@ for @recordFields@
recordFieldsSelector :: Selector
recordFieldsSelector = mkSelector "recordFields"

-- | @Selector@ for @recordID@
recordIDSelector :: Selector
recordIDSelector = mkSelector "recordID"

-- | @Selector@ for @databaseScope@
databaseScopeSelector :: Selector
databaseScopeSelector = mkSelector "databaseScope"

